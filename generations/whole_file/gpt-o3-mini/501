import numpy as np

def fit_line(x, y):
    """Función para ajustar una línea recta a un conjunto de datos"""
    # Calcular el valor medio de x e y
    x_mean = np.mean(x)
    y_mean = np.mean(y)
    
    # Calcular la desviación de x e y
    x_dev = x - x_mean
    y_dev = y - y_mean
    
    # Calcular el producto de las desviaciones de x e y
    xy_dev = x_dev * y_dev
    
    # Calcular el cuadrado de la desviación de x
    x_dev_squared = x_dev ** 2
    
    # Calcular la pendiente y la intersección de la línea recta
    slope = np.sum(xy_dev) / np.sum(x_dev_squared)
    intercept = y_mean - slope * x_mean
    
    return slope, intercept

# Definir una función para el ajuste de curva cuadrática de un array xy
def fit_quadratic(x, y):
    """Función para el ajuste de curva cuadrática de un arreglo y 
    para aumentar el valor de la desviación máxima calculada"""
    # Crear una matriz de Vandermonde
    A = np.vstack([x**2, x, np.ones(len(x))]).T
    
    # Usar el método de mínimos cuadrados para resolver los coeficientes
    coeffs = np.linalg.lstsq(A, y, rcond=None)[0]
    
    # Calcular la curva ajustada usando los coeficientes obtenidos:
    # y_fit = a*x^2 + b*x + c
    y_fit = coeffs[0]*x**2 + coeffs[1]*x + coeffs[2]
    
    # Calcular las desviaciones absolutas entre los valores reales y los ajustados
    deviations = np.abs(y - y_fit)
    
    # Encontrar la desviación máxima
    max_dev = np.max(deviations)
    
    # Aumentar el valor de la desviación máxima en un factor (por ejemplo, 1.1)
    increased_max_dev = max_dev * 1.1
    
    return coeffs, increased_max_dev